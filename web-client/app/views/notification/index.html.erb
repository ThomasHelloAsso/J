<%= render 'shared/magicbox/notification' %>

<div class="notif_mode_path" id="r-notif-mode-path">
  <div class="notif_new_update_path">
    <div class="notif_new_update_you">
      <div class="update_you_header">
        <span>You</span>
        <a href="#" class="clear_all_you">clear all</a>
      </div>
      <ul class="update_you_content">
        <% @notifications.select { |n| n['type'] == 'user' }.reverse.each do |notif| %>
          <li class="notif_information notif_<%= notif['_id'] %>">
            <div class="notif_avatar">
              <img src="/assets/ava-jimmy.png" alt="" />
            </div>
            <div class="notif_info_right">
              <div class="primary_content">
                <p class="notif_info_title">
                  <a href="/user/<%= notif['authors'].last %>" ><%= notif['authors'].last %></a> <%= notif['summary'] %> <a href="/jots/<%= notif['jot_id'] %>">jot</a>
                </p>
                <div class="notif_info_upload">
                  <span><%= distance_of_time_in_words Time.now, Time.parse(notif['time']) %> ago</span>
                </div>
              </div>
              <div class="secondary_content">
                <div class="notif_info_secondary_white">
                  <p class="notif_info_content">
                    <span class="notif_info_content_less"><%= truncate(notif['content'], :length => 70) %></span>
                    <span class="notif_info_content_more"><%= notif['content'] %></span>
                  </p>
                  <a id=<%= notif['_id'] %> href="javascript:void(0)" class="more_update_display">more</a>
                </div>
              </div>
            </div>
            <a href="#" id=<%= notif['_id'] %> class="update_close"></a>
          </li>
        <% end %>
      </ul>
    </div>
    <div class="notif_new_update_jot">
      <div class="update_you_header">
        <span>Your Jot</span>
        <a href="#" class="clear_all_jot">clear all</a>
      </div>
      <ul class="update_you_content">
        <% @notifications.select { |n| n['type'] == 'jot' }.reverse.each do |notif| %>
          <li class="notif_information notif_<%= notif['_id'] %>" >
            <div class="notif_avatar">
              <img src="/assets/ava-jimmy.png" alt="" />
            </div>
            <div class="notif_info_right">
              <div class="primary_content">
                <p class="notif_info_title">
                  <% if notif['authors'].count <= 1 %>
                    <a href="/user/<%= notif['authors'].last %>" ><%= notif['authors'].last %></a> <%= notif['summary'] %> <a href="/jots/<%= notif['jot_id'] %>">jot</a>
                  <% else %>
                    <a href="/user/<%= notif['authors'].last %>" ><%= notif['authors'].last %></a> and <a href="#"> <%= notif['authors'].count - 1 %> others </a><%= notif['summary'] %> 
                    <a href="/jots/<%= notif['jot_id'] %>">jot</a>
                  <% end %>
                </p>
                <div class="notif_info_upload">
                  <span><%= distance_of_time_in_words Time.now, Time.parse(notif['time']) %> ago</span>
                </div>
              </div>
              <div class="secondary_content">
                <div class="notif_info_secondary_white">
                  <p class="notif_info_content">
                    <span class="notif_info_content_less"><%= truncate(notif['content'], :length => 70) %></span>
                    <span class="notif_info_content_more"><%= notif['content'] %></span>
                  </p>
                  <a id=<%= notif['_id'] %> href="javascript:void(0)" class="more_update_display">more</a>
                </div>
              </div>
            </div>
            <a href="#" id=<%= notif['_id'] %> class="update_close"></a>
          </li>
        <% end %>
      </ul>
    </div>
    <a href="#" class="update_you_header_rounded" id="r-link-to-detail-notifications">
      See all updates
    </a>
    <div class="clear"></div>
  </div>
  <div class="clear"></div>
</div>
